<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <record id="installation_certificate_report" model="ir.actions.report">
        <field name="name">Installation Certificate</field>
        <field name="model">installation.certificate</field>
        <field name="report_type">qweb-pdf</field>
        <field name="report_name">fms_sale.installation_certificate</field>
        <field name="report_file">fms_sale.installation_certificate</field>
<!--        <field name="print_report_name">'Delivery Order' if object.picking_type_id.name == 'Delivery Orders' else 'GRN Report'</field>-->
        <field name="binding_model_id" ref="model_installation_certificate"/>
        <field name="binding_type">report</field>
    </record>

    <!--<report
        id="installation_certificate_report"
        model="installation.certificate"
        string="Installation Certificate"
        report_type="qweb-pdf"
        name="fms_sale.installation_certificate"
        file="fms_sale.installation_certificate"
    />-->

    <template id="installation_certificate">
        <t t-call="web.html_container">
            <t t-foreach="docs" t-as="o">
                <t t-call="web.basic_layout">
                <t t-if="o and 'company_id' in o">
                        <t t-set="company" t-value="o.company_id.sudo()"/>
                    </t>
                    <t t-if="not o or not 'company_id' in o">
                        <t t-set="company" t-value="res_company"/>
                    </t>                    
                <table style="width:100%">
                    <div class="header">
                        <table style="width:100%">
                            <tr>
								<t t-if="o.partner_id.customer_types=='opal customer'">
									<td width="25%">
										<img t-if="res_company.logo" t-att-src="'data:image/png;base64,%s' % to_text(res_company.logo)" width="140px"/>
									</td>
									<td style="width:50%;text-align:center;">
									</td>
									<td style="text-align:center;width:25%;">
										<img t-if="o.partner_id.image_1920" t-att-src="'data:image/png;base64,%s' % to_text(o.partner_id.image_1920)" width="150px"/>
									</td>
								</t>
								<t t-if="o.partner_id.customer_types!='opal customer'">
									<td width="100%">
										<img t-if="res_company.logo" t-att-src="'data:image/png;base64,%s' % to_text(res_company.logo)" width="140px"/>
									</td>
								</t>
                            </tr> 
                        </table>
                    </div>
                    <div class="row">                   
                        <table width="100%">
							 <br/>
                            <br/>
                            <tr width="100%">
                                <td width="60%"  style="font-size:20px;"><strong>Ref:<span t-field="o.name"/></strong></td>
                                    <td width="40%" style="text-align:right;font-size:20px;"><strong>Date:<span t-esc="datetime.datetime.now().strftime('%b %d,%Y')"/></strong></td>
                            </tr>
                            <tr><td><br/></td></tr>
                        </table>
                    </div>
                    <div class="row">
                        <table width="100%">
                            <tr>
                                <td>To</td>
                                <td>:</td>
                                <td ><span  t-field="o.partner_id"/>  </td>
                            </tr>
                            <tr><td><br/></td></tr>
                            <tr>
                                <td>From </td>
                                <td>:</td>
                                <td><span  t-field="o.company_id"></span>  </td>
                            </tr>
                            <tr><td><br/></td></tr>
                            <tr>
                                <td>Subject </td>
                                <td> : </td>
                                <td>Installation Certificate</td>
                            </tr>
                            <tr><td><br/></td></tr>
                            <tr>
                                <td>Validity </td>
                                <td> : </td>
                                <t t-if="o.validity == 1">
                                    <td><span  t-field="o.validity"></span><span>Year</span></td>
                                </t>
                                <t t-else="">
                                    <td><span  t-field="o.validity"></span><span>Years</span></td>
                                </t>
                            </tr>
                            <tr><td><br/></td></tr>
                            <tr><td><br/></td></tr>
                        </table>
                    </div>
                    <div class="row">
                        <table width="100%">
                            <tr>
                                <td  style="border-top:1px solid black;"></td>
                            </tr>
                            <tr><td><br/></td></tr>
                        </table>
                    </div>
                    <div class="row">
                        <table>
                            <tr style="font-size:15px;"><p>Sir/Madam,</p></tr>
                            <tr><td><br/></td></tr>
                        </table>
                    </div>
                    <div class="row">
                        <table width="100%">
                            <tr style="font-size:15px;">
                                <p>
                                    Global FMS would like to certify the installation of <strong><span t-field="o.job_card_id.device_id"></span></strong> product of <strong><span t-field="o.company_id.name"></span></strong>,
                                 provided to:<strong><span t-field="o.partner_id"></span></strong>.This IVMS device satisfies <b>BP, PDO, OPAL &amp; ROP</b> requirements as per the SP2000 standards and is currently working in good condition.
                                 The device has been installed in the vehicle mentioned below:
                                </p>
                            </tr>
                        </table>
                    </div>
                    <div class="row">
                        <table width="100%" class="table table-bordered">
                            <tr style="background-color:#2dafa9;">
                                <td style="text-align:center;padding-top:10px;padding-bottom:10px;"><b>Fleet Description</b></td>
                                <td style="text-align:center;padding-top:10px;padding-bottom:10px;"><b>Reg. No.</b></td>
                                <td style="text-align:center;padding-top:10px;padding-bottom:10px;"><b>VIN No.</b></td>
                                <td style="text-align:center;padding-top:10px;padding-bottom:10px;"><b>Device S/No.</b></td>
                            </tr>
                            <tr style="border:1px solid black;">
                                <td style="text-align:center;"><span t-field="o.fleet_description"></span></td>
                                <td style="text-align:center;"><span t-field="o.vehicle_number"></span></td>
                                <td style="text-align:center;"><span t-field="o.vin_no"></span></td>
                                <td style="text-align:center;"><span t-field="o.serial_no"></span></td>
                            </tr>  
                        </table>
                    </div>    
                    <div class="row">
                        <table>
                            <tr>
                                <td>Yours Faithfully,</td>
                            </tr>
                            <tr><td><br/></td></tr>
                            <tr><td><br/></td></tr>
                            <tr><td><br/></td></tr>
                            <tr><td><br/></td></tr>
                            <tr><td><br/></td></tr>
                            <tr><td><br/></td></tr>
                            <tr><td><br/></td></tr>
                            <tr><td><br/></td></tr>
                        </table>
                    </div>
                    <div class="row">
                        <table>
                            <tr>
                                <td>For <span t-field="o.company_id.name"/></td>
                            </tr>
                            <tr>    
                                <td>Tel No:<span t-field="o.company_id.phone"></span></td>
                            </tr>
                            <tr>
                                <td>Fax No:<span t-field="o.company_id.phone"></span></td>
                            </tr>
                        </table>
                    </div>
                </table>
                </t>        
            </t>        
        </t>
    </template>                
</odoo>                 
                    
