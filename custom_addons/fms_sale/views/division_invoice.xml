<?xml version="1.0" encoding="utf-8"?>
<odoo>
<!-- DIVISION WISE INVOICE -->
	
	<record id="division_invoice_tree" model="ir.ui.view">
        <field name="name">division.invoice.view</field>
        <field name="model">division.invoice</field>
        <field name="arch" type="xml">
        <tree string="Division Invoice">
                <field name="partner_id"/>
                <field name="invoice_date"/>
                <field name="due_date"/>
        </tree>
        </field>
    </record>

	<record id="division_invoice_form" model="ir.ui.view">
        <field name="name">division.invoice.form</field>
        <field name="model">division.invoice</field>
        <field name="arch" type="xml">
        <form string="Division Invoice">
			<header>
				<button name="to_confirm" type="object" string="Confirm"
						attrs="{'invisible':[('state','=','confirmed')]}"/>
				<field name="state" widget="statusbar"/>
			</header>
			<sheet >
				<div class="pull-left">
					<label for="name" class="oe_edit_only oe_inline"/>
					<h1>
						<field name="name" readonly="1"/>
					</h1>
				</div>
				<group>
					<group>
						<!--<field name="name"/>-->
						<field name="from_date" required="1" attrs="{'readonly':[('state','=','confirmed')]}"/>
						<field name="to_date"  required="1" attrs="{'readonly':[('state','=','confirmed')]}"/>
						<field name="partner_id" attrs="{'readonly':[('state','=','confirmed')]}"/>
						<field name="sub_partner_ids" domain="[('parent_id','=',partner_id)]"
							   widget="many2many_tags" attrs="{'invisible':[('invoice_type','!=','division')],'readonly':[('state','=','confirmed')]}" />
						<field name="invoice_ids" widget="many2many_tags" attrs="{'readonly':[('state','=','confirmed')]}"/>
						<field name="engineer_ids" widget="many2many_tags" attrs="{'readonly':[('state','=','confirmed')]}"/>
						<field name="job_card_ids" widget="many2many_tags" attrs="{'readonly':[('state','=','confirmed')]}"/>

					</group>
					<group>
						<field name="invoice_type" attrs="{'readonly':[('state','=','confirmed')]}"/>
						<field name="salesperson_id" attrs="{'readonly':[('state','=','confirmed')]}"/>
						<field name="invoicing_address_id" attrs="{'readonly':[('state','=','confirmed')]}"/>
						<field name="shipping_address_id" attrs="{'readonly':[('state','=','confirmed')]}"/>
						<field name="sale_order_id" invisible="1" attrs="{'readonly':[('state','=','confirmed')]}"/>
						<field name="order_ids" widget="many2many_tags" attrs="{'readonly':[('state','=','confirmed')]}"/>
						<field name="currency_id" invisible="1" attrs="{'readonly':[('state','=','confirmed')]}"/>
						<field name="company_id" invisible="1" attrs="{'readonly':[('state','=','confirmed')]}"/>
					</group>
				</group>

				<notebook>
                        <page string="Invoice Lines" >
							<field name="division_invoice_line_ids" widget="One2many_list" attrs="{'readonly':[('state','=','confirmed')]}">

								<tree string ="Division Invoice" editable="bottom">
									<field name="product_id"/>
									<field name="invoice_id" invisible="1"/>
									<field name="name"/>
									<field name="product_uom_qty"/>
									<field name="product_uom"/>
									<field name="account_analytic_id"/>
									<field name="analytic_tag_ids" widget="many2many_tags"/>
									<field name="price_unit"/>
									<field name="price_subtotal"/>
							    </tree>

							</field>
							<group class="oe_subtotal_footer oe_right" colspan="2" >
								<field name="amount_untaxed"/>

								<field name="amount_total" class="oe_subtotal_footer_separator"/>
							</group>
						</page>
						<page string="Device Details" >
							<field name="prorate_invoice_line" widget="one2many_list" attrs="{'readonly':[('state','=','confirmed')]}">
								<tree string="Prorate Invoice" editable="bottom">
									<field name="name" />
									<field name="vehicle_number" />
									<field name="device_type_id" />
									<field name="device_serial_no_id" />
									<field name="chassis_no" />
									<field name="sim_no" />
									<field name="partner_id" />
									<field name="installation_location" />
									<field name="installation_date" />
									<field name="subscription_status" />
									<field name="amount" />
								</tree>
							</field>
						</page>
				</notebook>
				 
					
            </sheet>
           
        </form>
        </field>
    </record>
    
    <record id="division_invoice_action" model="ir.actions.act_window">
    <field name="name">Consolidated Invoices</field>
    <field name="type">ir.actions.act_window</field>
    <field name="res_model">division.invoice</field>
<!--    <field name="view_type">form</field>-->
    <field name="view_mode">tree,form</field>

    </record>
    
<!--    <menuitem id="division_invoice_menu"-->
<!--            name="Consolidated Invoice"-->
<!--            parent="account.menu_finance_receivables_documents"-->
<!--            action="division_invoice_action"-->
<!--            sequence="5"/> -->
    
 </odoo>    
