<?xml version="1.0" encoding="UTF-8" ?>
<odoo>

    <record model="ir.ui.view" id="my_leave_approvals_search_view">
        <field name="name">my.leave.approvals.search.view</field>
        <field name="model">hr.holidays</field>
        <field name="arch" type="xml">
            <search>
                <field name="name"/>
                <field name="employee_id"/>
                <group expand="0" string="Group By">
                    <filter name="employee" string="Employee" context="{'group_by':'employee_id'}"/>
                </group>
            </search>
        </field>
    </record>

    <record id="my_leave_approvals_tree_view" model="ir.ui.view">
        <field name="name">my.approvals.tree.view</field>
        <field name="model">hr.holidays</field>
        <field name="arch" type="xml">
            <tree string="My Approvals" decoration-success="state == 'validate'">
                <field name="employee_id" string="Name"/>
                <field name="requested_date"/>
                <field name="name" string="Description"/>
                <field name="date_from" string="Date From"/>
                <field name="date_to" string="Date To"/>
                <field name="number_of_days" string="No:Of Days"/>
                <field name="next_approver_id" string="Next Approver"/>
                <field name="state"/>
            </tree>
        </field>
    </record>

    <record id="actions_my_leave_approvals" model="ir.actions.act_window">
        <field name="name">My Approvals</field>
        <field name="type">ir.actions.act_window</field>
        <field name="res_model">hr.holidays</field>
        <!--          <field name="view_type">form</field>-->
        <field name="view_id" ref="my_leave_approvals_tree_view"/>
        <field name="view_mode">tree,form</field>
        <field name="search_view_id" ref="my_leave_approvals_search_view"/>
        <field name="context">{}</field>
        <field name="domain">[('next_approver_id.user_id.id', '=', uid),('state', '!=', 'validate')]</field>
    </record>

    <record id="action_my_teams_leaves" model="ir.actions.act_window">
        <field name="name">My Teams Leaves</field>
        <field name="type">ir.actions.act_window</field>
        <field name="res_model">hr.holidays</field>
        <!--          <field name="view_type">form</field>-->
        <field name="view_mode">tree,form</field>
        <field name="domain">[('employee_id.coach_id.user_id', '=', uid), ('type', '=', 'remove')]</field>
        <field name="groups_id" eval="[(4, ref('bbis_hr.group_hr_holiday_teams_leaves'))]"/>
        <field name="search_view_id" ref="my_leave_approvals_search_view"/>
        <field name="context">{'default_type': 'remove'}</field>
    </record>

    <record id="action_my_department_leaves" model="ir.actions.act_window">
        <field name="name">My Department Leaves</field>
        <field name="type">ir.actions.act_window</field>
        <field name="res_model">hr.holidays</field>
        <!--          <field name="view_type">form</field>-->
        <field name="view_mode">tree,form</field>
        <field name="domain">[('employee_id.parent_id.user_id', '=', uid), ('type', '=', 'remove')]</field>
        <field name="groups_id" eval="[(4, ref('bbis_hr.group_hr_holiday_department_leaves'))]"/>
        <field name="search_view_id" ref="my_leave_approvals_search_view"/>
        <field name="context">{'default_type': 'remove'}</field>
    </record>

    <menuitem id="menu_my_leave_approvals"
      name="My Approvals"
      action="actions_my_leave_approvals"
      parent="hr_holidays.menu_hr_holidays_my_leaves"
      sequence="95"
      groups="hr_holidays.group_hr_holidays_user"/>

    <menuitem id="menu_my_teams_leaves"
      name="My Teams Leaves"
      action="action_my_teams_leaves"
      parent="hr_holidays.menu_hr_holidays_my_leaves"
      sequence="96"
      groups="bbis_hr.group_hr_holiday_teams_leaves"/>

    <menuitem id="menu_my_department_leaves"
      name="My Department Leaves"
      action="action_my_department_leaves"
      parent="hr_holidays.menu_hr_holidays_my_leaves"
      sequence="97"
      groups="bbis_hr.group_hr_holiday_department_leaves"/>

</odoo>