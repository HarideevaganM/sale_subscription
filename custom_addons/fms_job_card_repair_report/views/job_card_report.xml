<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>

        <record id="report_job_card_id" model="ir.actions.report">
            <field name="name">Support/Repair- Job Card</field>
            <field name="model">job.card</field>
            <field name="report_type">qweb-pdf</field>
            <field name="report_name">fms_job_card_repair_report.repair_report_template</field>
            <field name="report_file">fms_job_card_repair_report.repair_report_template</field>
        <!--            <field name="print_report_name">'Delivery Note - %s - %s' % (object.partner_id.name or '', object.name)</field>-->
        <!--            <field name="paperformat_id" ref="gfms_reports.gfms_sales_rpt_paper_format"/>-->
        </record>

        <!--<report id="report_job_card_id"
                model="job.card"
                string="Support/Repair- Job Card"
                report_type="qweb-pdf"
                file="fms_job_card_repair_report.repair_report_template"
                name="fms_job_card_repair_report.repair_report_template"/>-->

        <template id="repair_report_template">
            <t t-call="web.html_container">
                <t t-foreach="docs" t-as="doc">
                   <t t-call="web.basic_layout">
						<div class="header row" style="padding-top:10px;">
							<t t-if="o and 'company_id' in o">
								<t t-set="company" t-value="o.company_id.sudo()"/>
							</t>
							<t t-if="not o or not 'company_id' in o">
								<t t-set="company" t-value="res_company"/>
							</t>
							<table>
                                <style>
                                   div.right {
                                        position: absolute;
                                        right: 30px;
                                        width: 200px;
                                        color: #1f497d;
                                    }
                                </style>
                                <style>
                                   div.logo {
                                        position: absolute;
                                        left: 20px;
                                        width: 200px;
                                        height: 120px;
                                    }
                                </style>
                                <tr width="100%">
                                    <td width="50%">
                                        <div class="logo">
                                        <img  t-if="company.logo"
                                        t-att-src="'data:image/png;base64,%s' % to_text(company.logo)"  width="250px"/>
                                        </div>
                                    </td>
                                        <td width="50%" style="text-align:left">
                                            <div class="right">
                                            <t t-if="company.street">
                                                <span t-field="company.street"></span>
                                            </t>
                                            <t t-if="company.street2">
                                                <span t-field="company.street2"></span>,
                                                <br/>
                                            </t>
                                            <t t-if="company.city">
                                                <span t-field="company.city"></span>,
                                            </t>
                                            <t t-if="company.state_id">
                                                <span t-field="company.state_id"></span>,
                                            </t>
                                            <t t-if="company.zip">
                                                <span t-field="company.zip"></span>,
                                            </t>
                                            <t t-if="company.country_id">
                                                <span t-field="company.country_id"></span>
                                                <br/>
                                            </t>
                                            <t t-if="company.country_id">
                                                Tel: <span t-field="company.phone"></span>
                                                <br/>
                                            </t>
                                            <t t-if="company.fax_new">
                                                Fax: <span t-field="company.fax_new"></span>
                                                <br/>
                                            </t>
                                            <t t-if="company.email">
                                                Mail: <span t-field="company.email"></span>
                                                <br/>
                                            </t>
                                            <t t-if="company.website">
                                                <span t-raw="company.website.replace('https://','')"></span>
                                                <br/>
                                            </t>
                                            </div>
                                        </td>
                                 </tr>
							</table>
                        </div>
                        <table width="100%">
							<link href='https://fonts.googleapis.com/css?family=Times New Roman' rel='stylesheet'/>
                            <tr><center><h3 style="color:#1E7874;"><b><u>JOB CARD</u></b></h3></center></tr>
                            <tr width="100%">
                                <td width="40%">
                                    <span style="font-size:16px;color:#1f497d"><b>Date :</b></span><span style="font-size:16px;padding-left:2px;" t-esc="datetime.datetime.now().strftime('%d/%m/%Y')"/>
                                </td>
                                <td width="60%">
                                    <span style="padding-left:150px;font-size:16px;color:#1f497d"><b>Job No :</b></span><span style="padding-left:2px;font-size:16px;" t-field="doc.name"></span>
                                </td>
                            </tr>
                            <tr width="100%">
                                <td width="50%" style="padding-top:1px">
                                    <span style="font-size:16px;color:#1f497d"><b>Company Name : </b></span><span style="padding-left:2px;font-size:16px;" t-field="doc.company_id.name"></span>
                                </td>
                                <td width="50%" style="padding-top:1px">
                                    <span style="padding-left:150px;font-size:16px;color:#1f497d"><b>Job Type : </b></span><span style="padding-left:2px;font-size:16px" t-field="doc.job_card_type"></span>
                                </td>
                            </tr>
                            <tr width="100%">
                                <td width="50%" style="padding-top:1px">
                                    <span style="font-size:16px;color:#1f497d"><b>Location :</b></span><span style="padding-left:2px;font-size:16px;" t-field="doc.installation_location_id.name"></span>
                                </td>
<!--                                <t t-if="doc.job_card_type=='support'"> </t>-->
                                <td width="50%" style="padding-top:1px">
                                    <span style="padding-left:150px;font-size:18px;color:#1f497d"><b>Job Order : </b></span><span style="padding-left:2px;font-size:18px" t-field="doc.task_id"></span>
                                </td>
                            </tr>
                            <tr width="100%">
                                <td width="50%" style="padding-top:1px">
                                    <span style="font-size:18px;color:#1f497d"><b>Sale Order : </b></span><span style="padding-left:2px;font-size:18px" t-field="doc.sale_order_id"></span>
                                </td>
                                <td width="50%" style="padding-top:1px">
                                    <span style="padding-left:150px;font-size:18px;color:#1f497d"><b>Job Category : </b></span>
                                </td>
                            </tr>
                            <tr width="100%">
                                <td width="50%" style="padding-top:1px">
                                    <span style="font-size:18px;color:#1f497d"><b>Ticket Number : </b></span>
                                </td>
                                <td width="50%" style="padding-top:1px">
                                    <span style="padding-left:150px;font-size:18px;color:#1f497d"><b>Device Status : </b></span><span style="padding-left:2px;font-size:18px" t-field="doc.device_status"></span>
                                </td>
                            </tr>
                        </table>
                        <br></br>


                       <table class="table table-bordered" style="border: 3px" width = "100%">
                           <tr>
                               <td width = "30%"
                                    style="text-align:left;font-size:16px;color:#024963;border-color: #1E7874">
                                    <b>Vehicle Description</b>
                                </td>
                                <td colspan="4" width = "70%"
                                    style="text-align:left;font-size:16px;border-color: #1E7874">
                                    <span t-field="doc.vehicle_description"/>
                                </td>
                           </tr>

                           <tr>
                                <td width = "30%"
                                    style="text-align:left;font-size:16px;color:#1f497d;border-color: #1E7874">
                                    <b>Model/Year</b>
                                </td>
                                <td colspan="4" width = "70%"
                                    style="text-align:left;font-size:16px;border-color: #1E7874">
                                    <span t-field="doc.model"/>
                                </td>
                           </tr>
                                <tr>
                                    <td width = "30%"
                                        style="text-align:left;font-size:16px;color:#1f497d;border-color: #1E7874">
                                        <b>VIN(chassis) No</b>
                                    </td>
                                    <td colspan="4" width = "70%"
                                        style="text-align:left;font-size:16px;border-color: #1E7874">
                                        <span t-field="doc.chassis_no"/>
                                    </td>
                                </tr>
                                <tr>
                                    <td width = "30%"
                                        style="text-align:left;font-size:16px;color:#1f497d;border-color: #1E7874">
                                       <b> Device Type</b>
                                    </td>
                                    <td colspan="4" width = "70%"
                                        style="text-align:left;font-size:16px;border-color: #1E7874">
                                        <span t-field="doc.device_id.name"/>
                                    </td>
                                </tr>

                           <tr>
                                    <td width = "25%"
                                        style="text-align:left;font-size:16px;color:#1f497d;border-color: #1E7874">
                                      <b>  Vehicle Reg No </b>
                                    </td>
                                    <td width = "25%"
                                        style="text-align:left;font-size:16px;border-right:1px;border-color: #1E7874">
                                        <span t-field="doc.vehicle_number"/>
                                    </td>
                                <t t-if="doc.repair_job_type == 're_installation' ">
                                    <td width = "25%"
                                        style="text-align:left;font-size:16px;color:#1f497d;border-color: #1E7874"  >
                                       <b> Vehicle Reg No(Old)</b>
                                    </td>
                                </t>
                               <t t-elif="doc.repair_job_type in ['defective_device_replacement','defective_component_replacement','calibartion_testing','removal_returned','removal']">
                                    <td width = "25%"
                                        style="text-align:left;font-size:16px;color:#1f497d;border-left:1px;border-color: #1E7874;border-right:1px;border-color: #1E7874" >
                                    </td>
                                </t>
                               <t t-if="doc.repair_job_type == 're_installation' ">
                                   <td width = "25%"
                                        style="text-align:left;font-size:16px;border-color: #1E7874" >
                                        <span t-field="doc.vehicle_number_old"/>
                                    </td>
                                  </t>
                               <t t-elif="doc.repair_job_type in ['defective_device_replacement','defective_component_replacement','calibartion_testing','removal_returned','removal']">
                                   <td width = "25%"
                                        style="text-align:left;font-size:16px;border-left:1px;border-color: #1E7874" >
                                    </td>
                                 </t>
                                </tr>
                           <tr>
                                    <td width = "25%"
                                         style="text-align:left;font-size:16px;color:#1f497d;border-color: #1E7874" t-if="doc.repair_job_type in ['re_installation','defective_device_replacement']">
                                      <b>  Device Serial No </b>
                                    </td>
                                    <td width = "25%"
                                        style="text-align:left;font-size:16px;border-right:1px;border-color: #1E7874" t-if="doc.repair_job_type in ['re_installation','defective_device_replacement']">
                                        <span t-field="doc.device_serial_number_new_id"/>
                                    </td>
                               <td width = "25%"
                                         style="text-align:left;font-size:16px;color:#1f497d;border-color: #1E7874" t-if="doc.repair_job_type in ['re_installation','defective_device_replacement']">
                                      <b>  Device Serial No Old </b>
                                    </td>
                                    <td width = "25%"
                                        style="text-align:left;font-size:16px;border-color: #1E7874" t-if="doc.repair_job_type in ['re_installation','defective_device_replacement']">
                                        <span t-field="doc.device_serial_number_old_id"/>
                                    </td>
                               <!--<t t-if="doc.repair_job_type in ['re_installation','defective_device_replacement']">-->
                                    <!--<td width = "25%"-->
                                         <!--style="text-align:left;font-size:16px;color:#1f497d;border-color: #1E7874">-->
                                       <!--<b> Device Serial No</b>-->
                                    <!--</td>-->
                                <!--</t>-->
                               <!--<t t-elif="doc.repair_job_type in ['defective_component_replacement','calibartion_testing','removal_returned']">-->
                                    <!--<td width = "25%"-->
                                        <!--style="text-align:left;font-size:16px;color:#1f497d;border-left:1px;border-color: #1E7874;border-right:1px;border-color: #1E7874" >-->
                                    <!--</td>-->
                                <!--</t>-->
                               <!--<t t-if="doc.repair_job_type in ['re_installation','defective_device_replacement']">-->
                                   <!--<td width = "25%"-->
                                        <!--style="text-align:left;font-size:16px;border-color: #1E7874" >-->
                                        <!--<span t-field="doc.device_serial_number_new_id"/>-->
                                    <!--</td>-->
                                  <!--</t>-->
                               <!--<t t-elif="doc.repair_job_type in ['defective_component_replacement','calibartion_testing','removal_returned']">-->
                                   <!--<td width = "25%"-->
                                        <!--style="text-align:left;font-size:16px;border-left:1px;border-color: #1E7874" >-->
                                    <!--</td>-->
                                 <!--</t>-->




                               <!--<t  t-if="doc.repair_job_type in ['re_installation','defective_device_replacement','removal_returned']">-->
                                    <!--<td width = "25%"-->
                                        <!--style="text-align:left;font-size:18px;color:#1f497d;border-color: #1E7874">-->
                                       <!--<b>Device Serial No</b>-->
                                    <!--</td>-->
                               <!--</t>-->
                               <!--<t t-elif="doc.repair_job_type in ['defective_component_replacement','calibartion_testing','removal']">-->
                                   <!--<td width = "25%"-->
                                       <!--style="text-align:left;font-size:18px;color:#1f497d;border-left:1px;border-color: #1E7874;border-right:1px;border-color: #1E7874" >-->

                                    <!--</td>-->
                               <!--</t>-->
                               <!--<t t-if="doc.repair_job_type in ['re_installation','defective_device_replacement','removal_returned']">-->
                                    <!--<td width = "25%"-->
                                        <!--style="text-align:left;font-size:18px;border-color: #1E7874" >-->
                                        <!--<span t-field="doc.device_serial_number_new_id"/>-->
                                    <!--</td>-->
                               <!--</t>-->
                               <!--<t t-elif="doc.repair_job_type in ['defective_component_replacement','calibartion_testing','removal']">-->
                                    <!--<td width = "25%"-->
                                        <!--style="text-align:left;font-size:18px;border-color: #1E7874" >-->
                                    <!--</td>-->
                               <!--</t>-->
                                </tr>
                           <tr>

                           </tr>
                           <tr>
                           <t t-if="doc.repair_job_type == 'removal' ">
                               <td width = "30%"
                                        style="text-align:left;font-size:16px;color:#1f497d;border-color: #1E7874">
                                        <b>Device Serial No</b>
                                    </td>
                                    <td colspan="4" width = "70%"
                                        style="text-align:left;font-size:16px;border-color: #1E7874">
                                        <span t-field="doc.device_serial_number_new_id"/>
                                    </td>
                           </t>
                           </tr>
                           <tr>
                           <t t-if="doc.repair_job_type == 'defective_component_replacement' ">
                               <td width = "30%"
                                        style="text-align:left;font-size:16px;color:#1f497d;border-color: #1E7874">
                                        <b>Device Serial No Old</b>
                                    </td>
                                    <td colspan="4" width = "70%"
                                        style="text-align:left;font-size:16px;border-color: #1E7874">
                                        <span t-field="doc.device_serial_number_old_id"/>
                                    </td>
                           </t>
                           </tr>
                           <tr>
                           <t t-if="doc.repair_job_type == 'calibartion_testing' ">
                               <td width = "30%"
                                        style="text-align:left;font-size:16px;color:#1f497d;border-color: #1E7874">
                                        <b>Device Serial Old</b>
                                    </td>
                                    <td colspan="4" width = "70%"
                                        style="text-align:left;font-size:16px;border-color: #1E7874">
                                        <span t-field="doc.device_serial_number_old_id"/>
                                    </td>
                           </t>
                           </tr>
                           <tr>
                           <t t-if="doc.repair_job_type == 'removal_returned' ">
                               <td width = "30%"
                                        style="text-align:left;font-size:16px;color:#1f497d;border-color: #1E7874">
                                        <b>Device Serial Old</b>
                                    </td>
                                    <td colspan="4" width = "70%"
                                        style="text-align:left;font-size:16px;border-color: #1E7874">
                                        <span t-field="doc.device_serial_number_old_id"/>
                                    </td>
                           </t>
                           </tr>

                           <tr>
                                    <td width = "25%"
                                        style="text-align:left;font-size:16px;color:#1f497d;border-color: #1E7874">
                                      <b>  GSM No</b>
                                    </td>
                                    <td width = "25%"
                                        style="text-align:left;font-size:16px;border-color: #1E7874">
                                        <span t-field="doc.gsm_number"/>
                                    </td>
                                    <td width = "25%"
                                        style="text-align:left;font-size:16px;color:#1f497d;border-color: #1E7874">
                                       <b> GSM No Old</b>
                                    </td>
                                    <td width = "25%"
                                        style="text-align:left;font-size:16px;border-color: #1E7874">
                                        <span t-field="doc.gsm_number_old"/>
                                    </td>
                                </tr>
                           <tr>
                                    <td width = "25%"
                                        style="text-align:left;font-size:16px;color:#1f497d;border-color: #1E7874">
                                      <b>  GSM IMEI No</b>
                                    </td>
                                    <td width = "25%"
                                        style="text-align:left;font-size:16px;border-color: #1E7874">
                                        <span t-field="doc.gsm_imei_no"/>
                                    </td>
                                    <td width = "25%"
                                        style="text-align:left;font-size:16px;color:#1f497d;border-color: #1E7874">
                                       <b> GSM IMEI No Old</b>
                                    </td>
                                    <td width = "25%"
                                        style="text-align:left;font-size:16px;border-color: #1E7874">
                                        <span t-field="doc.gsm_imei_no_old"/>
                                    </td>
                                </tr>
                           <tr>
                                    <td width = "25%"
                                        style="text-align:left;font-size:16px;color:#1f497d;border-color: #1E7874">
                                      <b>  Satellite Modem IMEI</b>
                                    </td>
                                    <td width = "25%"
                                        style="text-align:left;font-size:16px;border-color: #1E7874">
                                        <span t-field="doc.gsm_imei_no"/>
                                    </td>
                                    <td width = "25%"
                                        style="text-align:left;font-size:16px;color:#1f497d;border-color: #1E7874">
                                       <b> Satellite Modem IMEI Old</b>
                                    </td>
                                    <td width = "25%"
                                        style="text-align:left;font-size:16px;border-color: #1E7874">
                                        <span t-field="doc.gsm_imei_no_old"/>
                                    </td>
                                </tr>
                                 <tr>
                                    <td width = "25%"
                                        style="text-align:left;font-size:16px;color:#1f497d;border-color: #1E7874">
                                      <b>  Speed Input </b>
                                    </td>
                                    <td width = "25%"
                                        style="text-align:left;font-size:16px;border-color: #1E7874">
                                        <span t-field="doc.speed_input"/>
                                    </td>
                                    <td width = "25%"
                                        style="text-align:left;font-size:16px;color:#1f497d;border-color: #1E7874">
                                       <b> Seat Belt</b>
                                    </td>
                                    <td width = "25%"
                                        style="text-align:left;font-size:16px;border-color: #1E7874">
                                        <span t-field="doc.seat_belt"/>
                                    </td>
                                </tr>
                                <tr>
                                    <td width = "25%"
                                        style="text-align:left;font-size:16px;color:#1f497d;border-color: #1E7874">
                                       <b> Panic Button</b>
                                    </td>
                                    <td width = "25%"
                                        style="text-align:left;font-size:16px;border-color: #1E7874">
                                        <span t-field="doc.panic_button"/>
                                    </td>
                                    <td width = "25%"
                                        style="text-align:left;font-size:16px;color:#1f497d;border-color: #1E7874">
                                       <b> RPM </b>
                                    </td>
                                    <td width = "25%"
                                        style="text-align:left;font-size:16px;border-color: #1E7874">
                                        <span t-field="doc.rpm"/>
                                    </td>
                                </tr>
                                <tr>
                                    <td width = "30%"
                                        style="text-align:left;font-size:16px;color:#1f497d;border-color: #1E7874">
                                       <b> Can Bus</b>
                                    </td>
                                    <td width = "70%" colspan="4"
                                        style="text-align:left;font-size:16px;border-color: #1E7874">
                                        <span t-field="doc.can_bus"/>
                                    </td>
                                </tr>
                           <tr>
                                <td  width = "30%" style="text-align:left;font-size:16px;color:#1f497d;border-color: #1E7874">
                                    <b>Problem</b>
                                </td>
                                <td  width = "70%" colspan="4" style="text-align:left;font-size:16px;border-color: #1E7874">
                                    <span t-field="doc.problem"/>
                                </td>
                                </tr>
                                <tr>
                                    <td  width = "30%" style="text-align:left;font-size:16px;color:#1f497d;border-color: #1E7874">
                                        <b>Rectification</b>
                                    </td>
                                    <td  width = "70%"  colspan="4" style="text-align:left;font-size:16px;border-color: #1E7874">
                                        <span t-field="doc.rectification"/>
                                    </td>
                                </tr>
                                <tr>
                                    <td width = "30%" style="text-align:left;font-size:16px;color:#1f497d;border-color: #1E7874">
                                       <b> Remarks</b>
                                    </td>
                                    <td  width = "70%" colspan="4" style="text-align:left;font-size:16px;border-color: #1E7874">
                                        <span t-field="doc.remarks"/>
                                    </td>
                                </tr>
                       </table>
                       <table width="100%">
                            <tr width="100%">
                                <td width="40%">
                                    <span style="font-size:16px;color:#1f497d"><b>Job done by :</b></span><span style="font-size:16px;padding-left:2px"  t-esc="doc.engineer_id.name"/>
                                </td>
                                <td width="60%" >
                                    <span style="padding-left:160px;font-size:16px;color:#1f497d"><b>Checked/Noted by : </b></span><span style="padding-left:2px;font-size:16px" t-field="doc.supervisor_id.name"></span>
                                </td>
                            </tr>
                        </table>
                       <table width="100%">
                            <tr width="100%">
                                <td width="40%" style="padding-top:1px">
                                    <span style="font-size:16px;padding-top:50%;color:#1f497d"><b>Installation Date  :</b></span><span style="font-size:16px;padding-left:2px" t-field="doc.installation_date"/>
                                </td>
                                <td width="60%" style="padding-top:1px">
                                    <span style="font-size:16px;padding-left:160px;font-size:16px;color:#1f497d"><b>Activation Date :</b></span><span style="padding-left:2px;font-size:16px" t-field="doc.activation_date"  t-field-options='{"format": "dd/MM/yyyy"}'></span>
                                </td>
                            </tr>
                       </table>
                       <table width="100%">

                            <tr width="100%" t-foreach="doc.card_line" t-as="l">
								<t t-if="l.state == 'installed'">
								<td width="35%" style="padding-top:1px">
                                    <span style="font-size:16px;padding-top:50%;color:#1f497d"><b>Start Time :</b></span><span style="padding-left:2px;font-size:18px" t-field="l.job_start_time"/>
                                </td>
                                <td width="35%" style="padding-top:1px">
                                    <span style="font-size:16px;padding-top:50%;color:#1f497d"><b>End Time:</b></span><span style="padding-left:2px;font-size:18px" t-field="l.job_end_time"/>
                                </td>
                                <td width="30%" style="padding-top:1px">
                                    <span style="font-size:16px;padding-top:50%;color:#1f497d"><b>Total Hours :</b></span>
                                </td>
                                </t>
                            </tr>
                       </table>


                       <table width="100%">
                           <tr width="100%">
                                <td width="40%" style="padding-top:1px">
                                    <span style="font-size:16px;color:#1f497d"><b>Chargable : YES/NO</b></span>
                                </td>
                               <td width="60%">
                                    <span style="padding-left:160px;font-size:16px;color:#1f497d"><b>Amount:</b></span>
                                </td>
                            </tr>
                       </table>
                       <table width="100%">
                           <tr width="100%">
                                <td width="40%" style="padding-top:1px">
                                    <span style="font-size:16px;color:#1f497d"><b>Description :</b></span>
                                </td>
                               <td width="60%">
                                    <span style="padding-left:160px;font-size:16px;color:#1f497d"></span>
                                </td>
                            </tr>
                       </table>
                       <table width="100%">
                            <tr width="100%">
                                <td width="100%" style="padding-top:1px">
                                    <span style="font-size:15px;font-style:italic;color:#1E7874"><b><span style="font-size:16px;color:#1f497d"></span>I agree that all work has been performed to my satisfaction.</b></span>
                                </td>
                            </tr>
                       </table>
                       <table width="100%">
                           <tr width="100%">
                                <td width="40%" style="padding-top:1px">
                                    <span style="font-size:16px;color:#1f497d"><b>Client Signature :</b></span>
                                </td>
                               <td width="60%">
                                    <span style="padding-left:160px;font-size:16px;color:#1f497d"><b>Date :</b></span>
                                </td>
                            </tr>
                       </table>



                    </t>
                </t>
            </t>
        </template>
    </data>
</odoo>
