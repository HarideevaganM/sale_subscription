<?xml version="1.0" encoding="UTF-8" ?>
<odoo>

    <record id="employee_attendance_tree_view" model="ir.ui.view">
        <field name="name">employee.attendance.tree.view</field>
        <field name="model">employee.attendance</field>
        <field name="arch" type="xml">
            <tree string="Attendance/Leave" decoration-success="short_name == 'A'">
                <field name="name"/>
<!--                <field name="date"/>-->
                <field name="check_in"/>
                <field name="check_out"/>
                <field name="remarks"/>
                <field name="short_name" string="Type"/>
            </tree>
        </field>
    </record>

    <record id="employee_attendance_pivot_view" model="ir.ui.view">
        <field name="name">employee.attendance.pivot.view</field>
        <field name="model">employee.attendance</field>
        <field name="arch" type="xml">
            <pivot string="Attendance/Leave">
                <field name="date" type="col"/>
                <field name="short_name" type="col"/>
                <field name="name" type="row"/>
            </pivot>
        </field>
    </record>

    <record id="employee_attendance_search_view" model="ir.ui.view">
        <field name="name">employee.attendance.search</field>
        <field name="model">employee.attendance</field>
        <field name="arch" type="xml">
            <search>
                <field name="name"/>
                <field name="month" string="Month"/>
                <field name="type"/>
                <group string="Group By">
                    <filter name="group_name" string="Date - Employee" context="{'group_by':['date', 'name']}"/>
                    <filter name="date" string="Date" context="{'group_by':'date'}"/>
                    <filter name="type" string="Type" context="{'group_by':'type'}"/>
                    <filter string="Current Month" name="current_month" domain="[('date','&gt;=',context_today().strftime('%%Y-%%m-01')),('date','&lt;',(context_today()+relativedelta(months=1)).strftime('%%Y-%%m-01'))]"/>
                    <filter string="Last Month" name="prev_month" domain="[('date','&gt;=',(context_today()-relativedelta(months=1)).strftime('%%Y-%%m-01')),('date','&lt;',time.strftime('%%Y-%%m-01'))]"/>
                    <filter string="Current Year" name="current_year" domain="[('date','&gt;=',context_today().strftime('%%Y-01-01')),('date','&lt;',(context_today()).strftime('%%Y-12-01'))]"/>
                    <filter string="Last Year" name="last_year" domain="[('date','&gt;=',(context_today()-relativedelta(years=1)).strftime('%%Y-01-01')),('date','&lt;',(context_today()-relativedelta(years=1)).strftime('%%Y-12-01'))]"/>
                    <filter name="attendace_id" string="Attendance" icon="terp-partner" context="{'group_by':'date'}"/>
                </group>
            </search>
        </field>
    </record>

    <record id="employee_attendance_graph_view" model="ir.ui.view">
        <field name="name">employee.attendance.graph.view</field>
        <field name="model">employee.attendance</field>
        <field name="arch" type="xml">
            <graph string="Attendance/Leave">
                <field name="name" type="row"/>
                <field name="date" type="measure"/>
            </graph>
        </field>
    </record>

    <record id="action_bbis_employee_attendance" model="ir.actions.act_window">
        <field name="name">Attendance/Leave Analysis</field>
        <field name="res_model">employee.attendance</field>
        <field name="view_mode">tree,graph,pivot</field>
        <field name="search_view_id" ref="employee_attendance_search_view"/>
        <field name="view_id"/>
        <field name="context">{'search_default_group_name':1}</field>
    </record>

    <record id="action_employee_attendance_tree_view" model="ir.actions.act_window.view">
        <field name="sequence" eval="1"/>
        <field name="view_mode">tree</field>
        <field name="view_id" ref="employee_attendance_tree_view"/>
        <field name="act_window_id" ref="action_bbis_employee_attendance"/>
    </record>

    <record id="action_employee_attendance_graph_view" model="ir.actions.act_window.view">
        <field name="sequence" eval="3"/>
        <field name="view_mode">graph</field>
        <field name="view_id" ref="employee_attendance_graph_view"/>
        <field name="act_window_id" ref="action_bbis_employee_attendance"/>
    </record>

    <record id="action_employee_attendance_pivot_view" model="ir.actions.act_window.view">
        <field name="sequence" eval="3"/>
        <field name="view_mode">pivot</field>
        <field name="view_id" ref="employee_attendance_pivot_view"/>
        <field name="act_window_id" ref="action_bbis_employee_attendance"/>
    </record>

    <menuitem id="menu_hr_attendance_report_analysis" name="Attendance Analysis" parent="hr_attendance.menu_hr_attendance_report" sequence="1" groups="hr_attendance.group_hr_attendance_user" action="hr_attendance.hr_attendance_action_graph"/>
    <menuitem id="menu_bbis_attendance_report" name="Attendance/Leave Analysis" parent="hr_attendance.menu_hr_attendance_report" sequence="2" groups="hr_attendance.group_hr_attendance_user" action="bbis_attendance_temp.action_bbis_employee_attendance"/>

</odoo>