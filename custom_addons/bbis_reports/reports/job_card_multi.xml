<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- Report Setup -->
    <report id="bbis_reports_job_card_multi"
        model="job.card"
        string="Print Job Cards"
        report_type="qweb-pdf"
        file="bbis_reports.job_card_multi"
        name="bbis_reports.job_card_multi"
        paperformat="bbis_reports.bbis_job_card_paper_format"
        print_report_name="'job_card_' + object[0].job_card_type" menu="False"
    /><!-- End: End Report Setup -->

    <!-- Report Template -->
    <template id="job_card_multi_document">
        <div class="header">
            <div class="bbis-company-header clear-fix">
                <img class="bbis-company-logo" style="height:130px; width:auto;" src="/bbis_reports/static/src/img/blackbox-logo.svg" alt="Logo"/>

                <div class="bbis-company-details">
                    <div t-if="company.street" t-esc="company.street"/>
                    <div>
                        <t t-if="company.street2"><span t-esc="company.street2"/>,</t>
                        <t t-if="company.city"><span t-esc="company.city"/></t>
                        <t t-if="company.state_id">, <span t-esc="company.state_id.name"/>,</t>
                        <t t-if="company.zip"><span t-esc="company.zip"/></t>

                    </div>
                    <div t-if="company.country_id" t-esc="company.country_id.name"/>
                    <div>
                        Tel : <span t-esc="company.phone"/>
                        Fax : <span t-esc="company.fax_new"/>
                    </div>
                    <div> Email : <span t-esc="company.email"/></div>
                    <div>Website : <span t-esc="company.website"/></div>
                </div>
            </div>
        </div>
        <div class="article o_report_layout_standard">
            <div class="page" style="font-size:12pt">
                <h1 class="text-center text-uppercase" style="margin:0 0 30px 0; font-size:22pt"><strong>Job Card</strong></h1>

                <!-- Job Order Header Details -->
                <div class="bbis-job-card-body-header clear-fix">
                    <table style="display:inline-block">
                        <tr>
                            <td>Date</td><td class="job-card-colon">:</td>
                            <td>
                                <span t-esc="datetime.datetime.now().strftime('%d/%m/%Y')"/>
                            </td>
                        </tr>
                        <tr>
                            <td>Client/Company</td><td class="job-card-colon">:</td><td><span t-field="doc.company_id.name"/></td>
                        </tr>


                    </table>
                    <table style="float:right">
                        <tr>
                            <td>Job Type</td><td class="job-card-colon">:</td><td><span t-field="doc.job_card_type"/></td>
                        </tr>
                        <tr>
                            <td>Sale Order</td><td class="job-card-colon">:</td><td><span t-field="doc.sale_order_id"/></td>
                        </tr>
                        <!--
                        <tr>
                            <td>Location</td><td class="job-card-colon">:</td><td><span t-field="doc.installation_location_id.name"/></td>
                        </tr>
                        -->

                    </table>
                </div><!-- End: Job Order Header Details -->

                <!-- Job Order Vehicle Details -->
                <table t-foreach="job_cards" t-as="job" class="bbis-job-card-vehicle-table">
                    <tr>
                        <td colspan="4" class="job-card-table-title"><span t-field="job.name"/></td>
                    </tr>
                    <tr>
                        <td class="job-card-table-col">
                            <table>
                                <tr><th class="left-header">Vehicle Model</th><td><span t-field="job.vehicle_description"/></td></tr>
                                <tr><th class="right-header">Vehicle Plate No.</th><td><span t-field="job.vehicle_number"/></td></tr>
                                <tr><th class="right-header">Model/Year</th><td><span t-field="job.model"/></td></tr>
                                <tr><th class="left-header">Device</th><td><span t-field="job.device_id.name"/></td></tr>
                                <tr><th class="right-header">Device Serial No.</th><td><span t-field="job.device_serial_number_new_id"/></td></tr>
                                <tr><th class="right-header">Device Status</th><td><span t-field="job.device_status"/></td></tr>
                            </table>
                        </td>
                        <td class="job-card-table-col">
                            <table>
                                <tr><th class="right-header">Job Done by</th><td><span t-field="job.engineer_id"/></td></tr>
                                <tr><th class="right-header">Installation Date</th><td><span t-field="job.installation_date" t-field-options='{"format": "dd/MM/yyyy"}'/></td></tr>
                                <tr><th class="right-header">Activation Date</th><td><span t-field="job.activation_date"  t-field-options='{"format": "dd/MM/yyyy"}'/></td></tr>
                                <tr><th class="left-header remarks-field">Remarks</th><td class="remarks-field"><span t-field="job.remarks"/></td></tr>
                            </table>
                        </td>

                    </tr>
                </table>
                <!-- End: Job Order Vehicle Details -->

                <!-- Job Order Footer Details -->
                <t t-set="job_len" t-value="len(job_cards)"/>
<!--                <t t-if="job_len > 5 and job_len < 10">-->
<!--                    <div style='page-break-before: always;'/>-->
<!--                </t>-->
                <table class="job-order-footer-details">
                    <tr>
                        <td>
                            <span>Checked/Noted by: </span><strong t-field="doc.supervisor_id.name"/>
                            <br/><br/><br/>
                            <span>I agree that all work has been performed to my satisfaction.</span>
                        </td>

                    </tr>
                </table>
                <table class="job-card-client-signature">
                    <tr>
                        <td>
                            <strong>Client Signature:</strong>
                        </td>
                        <td>
                            <strong>Date:</strong>
                        </td>
                    </tr>
                </table>
                <!-- End: Job Order Footer Details -->
            </div>
        </div>
        <div class="footer">
            <div style="background:#000000; height:1px; margin-bottom:5px"/>
            <ul class="list-inline bbis-footer-social-link-ul-inst-cert text-center">
                <li>
                    <img src="/bbis_reports/static/src/img/address.jpg" alt="Address" />
                    <span>Tamouh Tower, 22-C1, Marina Square, Al Reem Island, Abu Dhabi, UAE - P.O. Box 39366</span>
                </li>
                <li>
                    <img src="/bbis_reports/static/src/img/phone.jpg" alt="Phone" />
                    <span>+971 2 643 6640</span>
                </li>
                <li>
                    <img src="/bbis_reports/static/src/img/fax.jpg" alt="Fax" />
                    <span>+971 2 643 6642</span>
                </li>
                <li>
                    <img src="/bbis_reports/static/src/img/email.jpg" alt="Email" />
                    <span>blackbox@fms-tech.com</span>
                </li>
                <li>
                    <img src="/bbis_reports/static/src/img/web.jpg" alt="Email" />
                    <span>www.fms-tech.com</span>
                </li>
            </ul>
        </div>
    </template>
    <template id="job_card_multi">
        <t t-call="web.html_container">
            <t t-call="bbis_reports.job_card_multi_document" t-lang="doc.company_id.lang"/>
        </t>
    </template><!-- End: Report Template -->
</odoo>
